<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"><!-- Define a codifica√ß√£o de caracteres da p√°gina como UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Garante que o site seja responsivo em dispositivos m√≥veis -->
  <title>Meus Filmes Favoritos ‚≠ê</title><!-- T√≠tulo da aba do navegador -->
  <style>
    /* Estilos visuais do site */
    body {
      font-family: 'Segoe UI', sans-serif; /* Fonte principal */
      background: #fffafc; /* Cor de fundo suave */
      color: #333; /* Cor do texto */
      max-width: 600px; /* Largura m√°xima da p√°gina para melhor leitura */
      margin: auto; /* Centraliza horizontalmente */
      padding: 20px; /* Espa√ßamento interno */
    }
    h1 {
      text-align: center; /* Centraliza o t√≠tulo */
      color: #d63384; /* Cor rosa vibrante */
    }
    .entrada {
      display: flex; /* Exibe os elementos em linha */
      align-items: center; /* Alinha verticalmente */
      gap: 10px; /* Espa√ßo entre os elementos */
      margin-bottom: 15px; /* Espa√ßo abaixo */
    }
    input {
      flex: 1; /* O input ocupa o m√°ximo espa√ßo dispon√≠vel */
      padding: 10px; /* Espa√ßamento interno */
      border-radius: 8px; /* Bordas arredondadas */
      border: 1px solid #ccc; /* Borda cinza clara */
    }
    /* Estilos das estrelas para avalia√ß√£o */
    .estrelas-input span {
      font-size: 24px; /* Tamanho maior para as estrelas */
      color: #ccc; /* Cor cinza clara inicialmente */
      cursor: pointer; /* Cursor muda para indicar que √© clic√°vel */
      transition: color 0.2s; /* Transi√ß√£o suave de cor */
    }
    /* Cores das estrelas quando o mouse passa ou est√£o selecionadas */
    .estrelas-input span:hover,
    .estrelas-input span.hovered,
    .estrelas-input span.selecionada {
      color: gold; /* Cor dourada */
    }
    /* Estilo dos bot√µes */
    button {
      background-color: #d63384; /* Cor rosa */
      color: white; /* Texto branco */
      border: none; /* Sem borda */
      border-radius: 8px; /* Bordas arredondadas */
      padding: 10px 15px; /* Espa√ßamento interno */
      cursor: pointer; /* Cursor indicador de clique */
    }
    button:hover {
      background-color: #b92c6f; /* Cor rosa mais escura ao passar o mouse */
    }
    /* Estilos da lista de filmes */
    #lista .filme {
      display: flex; /* Exibe elementos em linha */
      align-items: center; /* Alinha verticalmente */
      justify-content: space-between; /* Espa√ßa entre elementos */
      border-bottom: 1px solid #ccc; /* Linha de separa√ß√£o */
      padding: 8px 0; /* Espa√ßamento vertical */
      border: 2px dashed #d63384; /* Borda rosa tracejada */
      border-radius: 10px; /* Bordas arredondadas */
      background-color: #fff0f7; /* Fundo rosa claro */
    }
    .filme .nome {
      flex: 1; /* O nome ocupa o m√°ximo espa√ßo */
    }
    .filme .estrelas span {
      font-size: 20px; /* Tamanho das estrelas nos filmes */
      color: gold; /* Cor dourada */
      margin-left: 5px; /* Espa√ßo entre estrelas */
    }
    /* Bot√£o de remover filme */
    .remover-btn {
      background: none; /* Sem fundo */
      color: #d63384; /* Cor rosa */
      border: none; /* Sem borda */
      cursor: pointer; /* Cursor de clique */
      font-size: 16px; /* Tamanho da fonte */
    }
    .remover-btn:hover {
      color: #a81e63; /* Rosa mais escuro ao passar o mouse */
    }
    body.dark {
      background-color: black;
      color: white;
    }

    body.dark button {
      background-color: #a8326f;
      color: #eee;
    }
    body.dark .nome {
      color: #333;
    }
    body.dark .estrelas{
      color: rgb(255, 238, 0);
    }

    body.tema {
      background-color: rgb(138, 187, 171);
      color: #ccc;
    }
    body.tema button {
      background-color: darkcyan;
      color: #ccc;
    }
    body.tema .nome{
      color: #161616;
    }

    body.tema h1 {
      color: rgb(0, 61, 61);
    }
    body.tema #lista .filme{
      background-color: rgb(199, 231, 221);
      display: flex; /* Exibe elementos em linha */
      align-items: center; /* Alinha verticalmente */
      justify-content: space-between; /* Espa√ßa entre elementos */
      border-bottom: 1px solid #ccc; /* Linha de separa√ß√£o */
      padding: 8px 0; /* Espa√ßamento vertical */
      border: 2px dashed rgb(0, 61, 61);
      border-radius: 10px; /* Bordas arredondadas */
    }


  </style>
</head>
<body>
  <h1>üé¨ Meus Filmes Favoritos</h1>

  <!-- √Årea para entrada do nome do filme, sele√ß√£o de estrelas e bot√£o adicionar -->
  <div class="entrada">
    <input type="text" id="titulo" placeholder="Nome do filme"><!-- Campo para digitar o t√≠tulo do filme -->
    <div class="estrelas-input" id="avaliacao"><!-- √Årea das estrelas para avalia√ß√£o -->
      <span data-estrela="1">‚òÖ</span><!-- Cada estrela tem um valor associado -->
      <span data-estrela="2">‚òÖ</span>
      <span data-estrela="3">‚òÖ</span>
      <span data-estrela="4">‚òÖ</span>
      <span data-estrela="5">‚òÖ</span>
    </div>
    <button id="botaoAdicionar">Adicionar</button><!-- Bot√£o para adicionar o filme √† lista -->
  </div>

  <div id="lista"></div><!-- Local onde os filmes adicionados ser√£o exibidos -->
  
  <br>
  
  <button id="limparTudo">üßπ Limpar tudo</button>

  <br>
  <br>

  <!-- Bot√£o e texto para o contador de cliques -->
  <div>
    <button id="botaoContador">Clique aqui</button>
    <p id="contador">Voc√™ clicou 0 vezes aqui</p><!-- Texto que mostra o n√∫mero de cliques -->
  </div>

  <!-- Bot√£o para ativar modo dark-->
   <div>
    <button id="modoDark">Modo dark</button>
   </div>

   <br>
  <!-- Bot√£o para mudar o tema-->
  <div>
    <button id="mudarTema">Alterar tema</button>
  </div>

  <script>
    // Recupera a lista de filmes do localStorage e converte de JSON para array, ou cria um array vazio se n√£o existir
    let filmes = JSON.parse(localStorage.getItem('filmesFavoritos')) || [];

    let notaSelecionada = 0; // Vari√°vel que armazena a nota (quantidade de estrelas) selecionada pelo usu√°rio

    // Tenta recuperar o n√∫mero de cliques salvos no localStorage para o contador
    let contador = localStorage.getItem('contadorCliques');

    // Se n√£o houver valor salvo, inicia o contador com zero
    if (!contador) {
      contador = 0;
    } else {
      // Como o localStorage guarda tudo como texto, converte a string para n√∫mero
      contador = Number(contador);
    }

    // Atualiza o texto do par√°grafo que mostra quantos cliques j√° foram feitos, usando o valor recuperado
    document.getElementById("contador").textContent = "Voc√™ clicou " + contador + " vezes aqui";

    // Seleciona todos os elementos span dentro da div com id 'avaliacao' (as estrelas)
    const estrelas = document.querySelectorAll('#avaliacao span');

    /* ADDEVENTLISTENER N¬∫1:
       Para cada estrela, adiciona um evento de mouseover que pinta as estrelas at√© a que o mouse estiver passando,
       dando um feedback visual para o usu√°rio */
    estrelas.forEach((estrela, index) => {
      estrela.addEventListener('mouseover', () => {
        // Para cada estrela, adiciona ou remove a classe 'hovered' para deixar dourada at√© a estrela atual
        estrelas.forEach((e, i) => e.classList.toggle('hovered', i <= index));
      });

      /* ADDEVENTLISTENER N¬∫2:
         Quando o mouse sai de cima da estrela, remove a cor dourada (classe 'hovered') */
      estrela.addEventListener('mouseout', () => {
        estrelas.forEach(e => e.classList.remove('hovered'));
      });

      /* ADDEVENTLISTENER N¬∫3:
         Quando uma estrela √© clicada, marca essa e todas as anteriores como selecionadas,
         e armazena a nota selecionada para salvar junto com o filme */
      estrela.addEventListener('click', () => {
        notaSelecionada = index + 1; // As estrelas s√£o contadas de 1 a 5, √≠ndice come√ßa em 0, por isso o +1
        estrelas.forEach((e, i) => {
          e.classList.toggle('selecionada', i < notaSelecionada); // Aplica ou remove a classe selecionada para pintar as estrelas
        });
      });
    });

    // Fun√ß√£o para salvar a lista de filmes no localStorage, convertendo o array para JSON
    function salvarFilmes() {
      localStorage.setItem('filmesFavoritos', JSON.stringify(filmes));
    }

    // Fun√ß√£o que incrementa o contador de cliques, atualiza o texto e salva o novo valor no localStorage
    function contarClicks() {
      contador++; // Soma 1 ao contador
      document.getElementById("contador").textContent = "Voc√™ clicou " + contador + " vezes aqui"; // Atualiza o texto no HTML
      localStorage.setItem('contadorCliques', contador); // Salva o novo valor no localStorage
    }

    //fun√ß√£o que envia mensagem quando clicar no botao
    function mensagem() {

      // Cria um novo par√°grafo
      const paragrafo = document.createElement('p');

      // Define o texto que ele vai mostrar
      paragrafo.textContent = "Voc√™ est√° interagindo com o contador!";

      // Adiciona esse par√°grafo logo abaixo do bot√£o
      document.body.appendChild(paragrafo);

      // Aguarda 0,5 segundos (500 milissegundos) e remove a mensagem
      setTimeout(() => {
        paragrafo.remove(); // Remove o elemento da p√°gina
      }, 500);
    }

    // Liga o bot√£o do contador ao evento de clique para executar a fun√ß√£o contarClicks quando clicado
    document.getElementById("botaoContador").addEventListener("click", contarClicks);  

    //mensagem dizendo que clicou no botao
    document.getElementById("botaoContador").addEventListener("click", mensagem);
                             
  function modoDark() {
    document.body.classList.toggle("dark"); // Alterna o modo dark

    // Atualiza o texto do bot√£o com base na classe
    const btn = document.getElementById("modoDark");
    if (document.body.classList.contains("dark")) {
      btn.textContent = "Modo claro";
      localStorage.setItem('modoDarkAtivo', true); // Salva como "true"
    } else {
      btn.textContent = "Modo dark";
      localStorage.setItem('modoDarkAtivo', false); // Salva como "false"
    }
  }


    function mudarTema(){
      document.body.classList.toggle("tema"); // Alterna a classe 'tema'
      const estaComTema = document.body.classList.contains("tema"); // Verifica se o tema est√° ativado
      localStorage.setItem('temaAtivo', estaComTema); // Salva true ou false
    }


    document.getElementById("modoDark").addEventListener("click", modoDark);

    document.getElementById("mudarTema").addEventListener("click", mudarTema);

    // Fun√ß√£o que exibe a lista de filmes na tela, criando elementos HTML dinamicamente
    function mostrarFilmes() {
      const lista = document.getElementById('lista'); // Pega o elemento onde os filmes ser√£o mostrados
      lista.innerHTML = ''; // Limpa o conte√∫do antes de mostrar (para evitar duplica√ß√£o)

      // Para cada filme salvo no array, cria uma linha na lista
      filmes.forEach((filme, index) => {
        const div = document.createElement('div'); // Cria uma div para o filme
        div.className = 'filme'; // Define a classe para estiliza√ß√£o

        const nome = document.createElement('div'); // Cria div para o nome do filme
        nome.className = 'nome'; // Classe para estiliza√ß√£o
        nome.textContent = filme.titulo; // Define o texto com o t√≠tulo do filme

        const estrelasDiv = document.createElement('div'); // Cria div para as estrelas
        estrelasDiv.className = 'estrelas'; // Classe para estiliza√ß√£o
        estrelasDiv.innerHTML = '‚òÖ'.repeat(filme.nota); // Insere o n√∫mero de estrelas baseado na nota do filme

        const botaoRemover = document.createElement('button'); // Cria bot√£o para remover o filme
        botaoRemover.className = 'remover-btn'; // Classe para estiliza√ß√£o
        botaoRemover.textContent = 'üóë'; // √çcone de lixeira


        /* ADDEVENTLISTENER N¬∫4:
           Quando clicar no bot√£o remover, chama a fun√ß√£o removerFilme passando o √≠ndice para excluir o filme certo */
        botaoRemover.addEventListener('click', () => {
          removerFilme(index);
        });

        // Adiciona o nome, as estrelas e o bot√£o remover dentro da div principal do filme
        div.appendChild( nome);
        div.appendChild(estrelasDiv);
        div.appendChild(botaoRemover);

        // Adiciona a div do filme na lista principal da p√°gina
        lista.appendChild(div);
      });
    }

    // Fun√ß√£o que adiciona um novo filme ao array, salva e mostra na tela
    function adicionarFilme() {
      const titulo = document.getElementById('titulo').value.trim(); // Pega o texto digitado e remove espa√ßos extras

      // S√≥ adiciona se tiver um t√≠tulo e se uma nota foi selecionada
      if (titulo && notaSelecionada > 0) {
        filmes.push({ titulo, nota: notaSelecionada }); // Adiciona objeto filme ao array
        salvarFilmes(); // Salva no localStorage
        mostrarFilmes(); // Atualiza a lista na tela

        // Limpa o input e reseta a nota selecionada para zero
        document.getElementById('titulo').value = '';
        notaSelecionada = 0;
        // Remove a sele√ß√£o das estrelas (para o usu√°rio come√ßar do zero de novo)
        estrelas.forEach(e => e.classList.remove('selecionada'));
      }
    }

    // Fun√ß√£o para remover um filme da lista pelo √≠ndice
    function removerFilme(index) {
      filmes.splice(index, 1); // Remove o filme do array
      salvarFilmes(); // Atualiza o localStorage
      mostrarFilmes(); // Atualiza a lista na tela
    }
    
    //fun√ß√£o para remover todos os filmes de uma s√≥ ves
    function removerTodosFilmes() {
      filmes = []; // esvazia a lista
      salvarFilmes(); // atualiza o localStorage
      mostrarFilmes(); // limpa a tela
    }

    //liga o botao ao fun√ß√£o limpar tudo
    document.getElementById('limparTudo').addEventListener('click', removerTodosFilmes);


    /* ADDEVENTLISTENER N¬∫5:
       Quando o bot√£o "Adicionar" √© clicado, executa a fun√ß√£o adicionarFilme para incluir o filme */
    document.getElementById('botaoAdicionar').addEventListener('click', adicionarFilme);

    // Quando a p√°gina carrega, mostra os filmes salvos (se houver)
    mostrarFilmes();

    // Ao carregar a p√°gina, verifica se o tema estava ativado antes e aplica
    if (localStorage.getItem("temaAtivo") === "true") {
      document.body.classList.add("tema");
    }

    // Ao carregar a p√°gina, verifica se o modo dark estava ativado e aplica
    if (localStorage.getItem("modoDarkAtivo") === "true") {
      document.body.classList.add("dark");
      document.getElementById("modoDark").textContent = "Modo claro";
    }

  </script>
</body>
</html>
